{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "https://raw.githubusercontent.com/jakesower/spectragraph/main/schemas/spectragraph-schema.1.0.schema.json",
	"title": "SpectraGraph Schema",
	"description": "A metaschema for SpectraGraph schemas.",
	"type": "object",
	"required": ["resources"],
	"properties": {
		"$id": { "type": "string" },
		"$comment": { "type": "string" },
		"$schema": { "type": "string" },
		"version": { "type": "string" },
		"resources": {
			"type": "object",
			"minProperties": 1,
			"patternProperties": {
				"[^.$]": {
					"type": "object",
					"required": ["attributes", "relationships"],
					"properties": {
						"plural": { "type": "string" },
						"singular": { "type": "string" },
						"attributes": {
							"type": "object",
							"patternProperties": {
								"[^.$]": {
									"$ref": "#/definitions/attribute"
								}
							}
						},
						"relationships": {
							"type": "object",
							"patternProperties": {
								"[^.$]": {
									"$ref": "#/definitions/relationship"
								}
							}
						}
					}
				}
			}
		}
	},
	"definitions": {
		"attribute": {
			"$comment": "these are an extension of JSON Schema, except for \"required\"",
			"type": "object",
			"required": ["type"],
			"properties": {
				"type": {
					"enum": [
						"array",
						"boolean",
						"integer",
						"null",
						"number",
						"object",
						"string"
					]
				},
				"format": {
					"$comment": "see https://ajv.js.org/packages/ajv-formats.html and https://gitlab.com/mjbecze/GeoJSON-Validation/-/blob/master/docs/index.md",
					"type": "string",
					"enum": [
						"date",
						"time",
						"date-time",
						"iso-time",
						"iso-date-time",
						"duration",
						"uri",
						"uri-reference",
						"uri-template",
						"url",
						"email",
						"hostname",
						"ipv4",
						"ipv6",
						"regex",
						"uuid",
						"json-pointer",
						"relative-json-pointer",
						"byte",
						"int32",
						"int64",
						"float",
						"double",
						"password",
						"binary",
						"spectragraph:geojson",
						"spectragraph:geojson-point"
					]
				},
				"required": { "type": "boolean" }
			}
		},
		"relationship": {
			"type": "object",
			"required": ["type", "cardinality"],
			"properties": {
				"type": { "type": "string" },
				"cardinality": { "type": "string", "enum": ["one", "many"] },
				"inverse": { "type": "string" },
				"required": { "type": "boolean" }
			}
		}
	}
}
